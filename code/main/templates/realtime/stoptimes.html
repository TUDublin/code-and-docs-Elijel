{% extends "base.html" %}
{% load static %}
{% block metadescription %}
Stop Times
{% endblock %}
{% block title %}
Stop Times
{% endblock %}
{% block content %}

<div class="row">
	<div class="col-7">	
		<div id="map" style="height: 700px; width: 100%;"></div>
	</div>
	<div class="col">
		{% if stop %}
		<h4 class="text-center pt-2 pb-2">{{ stop.stop_name }}</h>
		{% endif %}
		<table class="table">
	
			<thead>
			  <tr>
				<th class="col-1">ROUTE</th>
				<th class="col-1">DIRECTION</th>
				<th class="col-1">DUE</th>
			  </tr>
			</thead>
		
			<tbody>
				{% for i in stop_time_list %}
						<tr>
							{% if i.arrival_time is None %}
							{%else%}
							<td>{{i.route_short_name}}</td>
							<td>{{i.stop_headsign}}</td>
							<td>{{i.arrival_time}}</td>
							{%endif%}
						</tr>
			  {% endfor %}
			</tbody>
		</table>
	</div>
</div>

<form method="POST" action="">
	{% csrf_token %}
	<input type="hidden" name="stop_id" value="{{ stop.id }}">
	<button type="submit">Add to Favorites</button>
</form>
  
  


<script>
  function initMap() {
    var lat = {{stop_lat}};
    var lng = {{stop_lon}};
    var stopLocation = {lat: lat, lng: lng};

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 18,
      center: stopLocation
    });

    var marker = new google.maps.Marker({
      position: stopLocation,
      map: map
    });
}
</script>

<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAzrvIvbaR-QS_49R5irnOvy-sD3WmIeR0&callback=initMap">
</script>


{% endblock %}
